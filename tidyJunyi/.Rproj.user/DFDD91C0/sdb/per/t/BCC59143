{
    "contents" : "setwd(\"/Users/peishenwu/Google 雲端硬碟/【01】醫學/PMR/R2/Auto_VFSS/20160122\")\nsource(\"JSONtoTable.R\")\n\nrootPath = \"/Users/peishenwu/Google 雲端硬碟/【01】醫學/PMR/R2/Auto_VFSS/20160122/\"\nsetwd(paste(rootPath,\"datasets\",sep=\"\"))\npatientNo <- system(\"ls\", intern = T)\npatientNo <- patientNo[grepl(\"^\\\\d\",patientNo)]\n\nresultAgg <- data.frame(patientNo = NA, \n                        ROI = NA,\n                        barium.type = NA,\n                        img_name = NA, \n                        ax = NA, ay = NA, aw = NA, ah = NA,\n                        px = NA, py = NA, pw = NA, ph = NA)\nfor(i in patientNo){\n  for(j in c(\"thin\",\"thick\",\"paste\")){\n    for(k in c(\"hyoid\",\"C3\")){\n      setwd(paste(rootPath,\"datasets/\",i,\"/\",j,sep=\"\"))\n      message(paste(rootPath,\"datasets/\",i,\"/\",j,sep=\"\"))\n      read.data <- openJSON(paste(k,\".json\",sep=\"\"))\n      resultAgg <- rbind(resultAgg,\n                         data.frame(patientNo = i, \n                                    ROI = k,\n                                    barium.type = j,\n                                    img_name =  read.data$img_name, \n                                    ax =  read.data$ax, ay =  read.data$ay, aw =  read.data$aw, ah =  read.data$ah,\n                                    px =  read.data$px, py =  read.data$py, pw =  read.data$pw, ph =  read.data$ph))\n    }#end for ROI type\n  }#end for barium type\n}#end for each patient\nresultAgg <- resultAgg[-1,]\n##\n\n#library(xlsx)\n#setwd(rootPath)\n#write.xlsx(resultAgg,\"output.xlsx\",\"results\",row.names = F)\n\nerrorMatrix <- resultAgg[,5:8] - resultAgg[,9:12]\nerrorMatrix <- errorMatrix[complete.cases(errorMatrix),]\nerror <- sapply(1:nrow(errorMatrix), \n                function(x){ unlist(errorMatrix[x,]) %*% unlist(errorMatrix[x,]) })\nerror <- (error != 0)\n\n##calculate metrics\nerror_rate <- sum(error)/length(error)\n\nerror.index <- c(1:length(error))[error]\nerror.interval <- (error.index - c(0,error.index[-length(error.index)]))[-1]\n\nmean.err.interval <- mean(error.interval)\n\n\n",
    "created" : 1484503317221.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "686354685",
    "id" : "BCC59143",
    "lastKnownWriteTime" : 1453402411,
    "path" : "~/Google 雲端硬碟/【01】醫學/PMR/R2/Auto_VFSS/20160122/analysis.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}